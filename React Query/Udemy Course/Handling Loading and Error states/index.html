
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../Getting%20Started%20with%20React%20Query/" rel="prev"/>
<link href="../Introduction%20to%20React%20Query/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.12" name="generator"/>
<title>isFetching vs isLoading - obsidian-mkdocs template</title>
<link href="../../../assets/stylesheets/main.0d440cfe.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="pink" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#isfetching-vs-isloading">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="obsidian-mkdocs template" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="obsidian-mkdocs template">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            obsidian-mkdocs template
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              isFetching vs isLoading
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="pink" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="pink" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="obsidian-mkdocs template" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="obsidian-mkdocs template">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    obsidian-mkdocs template
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
        Notes - React Query Udemy Course
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          React Query
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          React Query
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          Udemy Course
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_1">
<span class="md-nav__icon md-icon"></span>
          Udemy Course
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../Getting%20Started%20with%20React%20Query/">
        Getting Started with React Query
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<a class="md-nav__link md-nav__link--active" href="./">
        isFetching vs isLoading
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Introduction%20to%20React%20Query/">
        Client State vs Server State
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../React%20Query%20DevTools/">
        React Query DevTools
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Stale%20time%20vs%20Cache%20time/">
        Stale time vs Cache time
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="isfetching-vs-isloading">isFetching vs isLoading<a class="headerlink" href="#isfetching-vs-isloading" title="Permanent link">¶</a></h1>
<p><code>isFetching</code> and <code>isLoading</code> are two important states provided by React Query to manage the status of a query or a mutation. Understanding the difference between these two states is crucial to effectively use React Query and provide a smooth user experience.</p>
<p><code>isFetching</code> is a state that indicates whether a query is currently being executed. In other words, it means that the async function associated with the query has not yet resolved. This state is useful for indicating to the user that the application is currently fetching data from the server and that they need to wait for the response. When <code>isFetching</code> is <code>true</code>, the component using the query should display a loading indicator.</p>
<p><code>isLoading</code> is a state that indicates whether a query is currently in a loading state. This state is more comprehensive than <code>isFetching</code> and takes into account two factors: (1) the absence of cached data and (2) the value of  <code>isFetching</code>. In other words, <code>isLoading</code> is <code>true</code> when there is no cached data and <code>isFetching</code> is <code>true</code>.</p>
<p>When a query is <code>isLoading</code>, it means that the component using the query should display a loading indicator. This is because the query has either not started yet or it is currently being executed, and the application is waiting for a response from the server.</p>
<p>In conclusion, <code>isFetching</code> and <code>isLoading</code> are two different states provided by React Query to manage the status of a query or a mutation. By using these states, you can effectively manage the loading state of an application and ensure that the user is informed about the status of the query. This helps provide a smooth and responsive user experience, even when the application is fetching data from the server.</p>
<pre><code class="language-jsx">import { useQuery } from '@tanstack/react-query';

const fetchPosts = async () =&gt; {
  const response = await fetch('https://jsonplaceholder.typicode.com/posts');
  return response.json();
};

const PostsList = () =&gt; {
  const { isLoading, isFetching, data, error } = useQuery(['posts'], fetchPosts);

  if (error) {
    return &lt;div&gt;An error has occurred: {error.message}&lt;/div&gt;;
  }

  if (isLoading) {
    return &lt;div&gt;Loading...&lt;/div&gt;;
  }

  if (isFetching) {
    return &lt;div&gt;Fetching new data...&lt;/div&gt;;
  }

  return (
    &lt;ul&gt;
      {data.map(post =&gt; (
        &lt;li key={post.id}&gt;{post.title}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
};
</code></pre>
<p>In this example, <code>isLoading</code> is <code>true</code> when there is no cached data and the fetching of data has not started yet. In this case, the component displays a "Loading..." message to inform the user that the application is waiting for data.</p>
<p><code>isFetching</code> is <code>true</code> when the fetching of data has started, but the async function associated with the query has not yet resolved. In this case, the component displays a "Fetching new data..." message to inform the user that the application is currently fetching data from the server and that they need to wait for the response.</p>
<p>In the case where an error has occurred, the component displays an error message to inform the user that something went wrong.</p>
<h1 id="iserror">isError<a class="headerlink" href="#iserror" title="Permanent link">¶</a></h1>
<p>The <code>isError</code> state in React Query allows you to determine whether an error has occurred during the execution of a query or a mutation. This state is a boolean value that is set to <code>true</code> if there was an error, and <code>false</code> otherwise.</p>
<p>The <code>error</code> object, on the other hand, contains information about the error that occurred. This object can be used to display more detailed error information to the user. For example, you could display the error message, status code, or other details associated with the error.</p>
<p>Here is an example of how you can use the <code>isError</code> and <code>error</code> states in your React component:</p>
<pre><code class="language-jsx">import { useQuery } from '@tanstack/react-query';

const fetchPosts = async () =&gt; {
  const response = await fetch('https://jsonplaceholder.typicode.com/posts');
  return response.json();
};

const PostsList = () =&gt; {
  const { isLoading, isFetching, isError, error, data } = useQuery(['posts'], fetchPosts);

  if (isError) {
    return &lt;div&gt;An error has occurred: {error.message}&lt;/div&gt;;
  }

  if (isLoading) {
    return &lt;div&gt;Loading...&lt;/div&gt;;
  }

  if (isFetching) {
    return &lt;div&gt;Fetching new data...&lt;/div&gt;;
  }

  return (
    &lt;ul&gt;
      {data.map(post =&gt; (
        &lt;li key={post.id}&gt;{post.title}&lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
};

</code></pre>
<h1 id="retries">Retries<a class="headerlink" href="#retries" title="Permanent link">¶</a></h1>
<p>React Query will automatically retry a failed query or mutation up to three times by default. This is done to ensure that the request has a better chance of succeeding if it initially fails due to network issues or other temporary problems.</p>
<p>However, you can modify this behavior by specifying the <code>retry</code> option when calling <code>useQuery</code>. For example, if you want to retry a query only once, you can set the <code>retry</code> option to <code>1</code>:</p>
<pre><code class="language-js">const { data, error } = useQuery(['posts'], fetchPosts, { retry: 1 });
</code></pre>
<p>In some cases, you may also want to specify a custom retry logic. You can do this by passing a function as the <code>retry</code> option. The function will receive the previous attempts as an argument, and it should return the number of remaining retries. For example, you can use a custom retry logic to only retry if the error code is specific:</p>
<pre><code class="language-js">const retry = (attempts) =&gt; {
  if (attempts[attempts.length - 1].error.code === '429') {
    return 1;
  }

  return 0;
};

const { data, error } = useQuery(['posts'], fetchPosts, { retry: retry });
</code></pre>
<h1 id="onerror">onError<a class="headerlink" href="#onerror" title="Permanent link">¶</a></h1>
<p>React Query also provides a way to handle errors that occur during a query or mutation. You can use the <code>onError</code> option to specify a callback function that will be called when an error occurs. The function will receive the error as an argument.</p>
<p>For example, you can use the <code>onError</code> option to display an error message to the user:</p>
<pre><code class="language-js">const onError = (error) =&gt; {
  console.error(error);
  alert('An error occurred while fetching the data. Please try again later.');
};

const { data, error } = useQuery('posts', fetchPosts, { onError });
</code></pre>
<p>In this example, the <code>onError</code> callback function is called whenever an error occurs, and it logs the error to the console and displays an error message to the user using an <code>alert</code> function.</p>
<p>Note that the <code>onError</code> option is only called if an error occurs, and it does not affect the retry behavior of React Query. If you want to modify the retry behavior, you can use the <code>retry</code> option as described in the previous paragraph.</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.4b2c34cd.min.js"></script>
<script src="../../../javascripts/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</body>
</html>